<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>使用web Storage实现登陆注册和计数器</title>

	<script type="text/javascript">


		function onload(){
			// 隐藏输入框和提交按钮
			inputSpan.style.display='none';
			if(typeof(Storage)=='undefined'){
				alert("您的浏览器不支持web Storage");
			}else {
				// 判断姓名是否已存入localStorage
				if(localStorage.username){
					// 数据不存在时返回undefined
					if(!localStorage.content){
						localStorage.content=1;
					}else {
						localStorage.content++;
					}
					// 隐藏登录按钮
					btnLogin.style.display='none';
					showLocalStorage.innerHTML=localStorage.username+"你好，这是第"+localStorage.content+"次来了";

				}

				btnLogin.addEventListener("click",login);
				btnSend.addEventListener("click",sendOk);
				btnLoginOut.addEventListener("click",clearLocalStorage);
				
			}
		}
		function sendOk(){
			localStorage.username=inputName.value;
			// 重新加载网页
			location.reload();

		}
		function login(){
			// 显示姓名输入框和提交按钮
			inputSpan.style.display='';
		}
		function clearLocalStorage(){
			// 清空localStorage
			localStorage.clear();
			showLocalStorage.innerHTML="已注销成功";
			// 显示登录按钮
			btnLogin.style.display='';
			// 显示姓名输入框和提交按钮
			inputSpan.style.display='';
		}
	</script>
</head>
<body onload="onload()">
	<button id="btnLogin">登录</button>
	<button id="btnLoginOut">注销</button><br>
	<span id="inputSpan">请输入你的姓名：<input type="text" id="inputName"
		value=""><button id="btnSend">提交</button></span><br>
	<div id="showLocalStorage"></div>
	
</body>
</html>